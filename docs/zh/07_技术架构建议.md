# 技术架构建议（MVP 可落地版本）

## 总体目标

- 支持“内容 + 审核 + AI 问答 + 反垃圾/反诈骗”的最小闭环
- 可扩展到多城市/多学校、多语言、志愿者工单
- 默认安全与隐私保护

## 推荐技术栈（可替换）

### 前端

- Next.js（React + TypeScript）
- UI：Tailwind CSS（或 Chakra/MUI）
- 国际化：next-intl（或 i18next）

### 后端

二选一（团队熟悉哪个选哪个）：

- Node.js：NestJS（或 Express/Fastify）
- Python：FastAPI

### 数据与搜索

- 主库：PostgreSQL
- 搜索：PostgreSQL 全文检索（MVP）→ 规模上来再引入 OpenSearch/Elastic
- 向量检索：pgvector（MVP 够用）
- 缓存/队列：Redis（用于频控、审核队列、异步任务）

### 文件与媒体

- 对象存储：S3 兼容（或云厂商对象存储）
- 安全处理：EXIF 清理；可选图片打码（电话/地址/人脸）

## 服务划分（MVP）

- Web App（前端 SSR/ISR）
- API 服务（鉴权、内容、审核、志愿者）
- AI 服务（可与 API 合并，或单独服务）
  - RAG：检索 + 重排 + 生成
  - 审查：规则 + 模型输出风险标签
- Worker（异步任务）
  - 内容向量化
  - 审核队列处理
  - 过期提醒/更新任务

## 权限与角色

- user：阅读、提问、投稿
- contributor：更高频投稿、可参与更新
- volunteer：参与核验/翻译/答疑工单
- moderator：审核、封禁、处理申诉
- admin：系统配置与权限管理

## 核心数据模型（概览）

- User：用户与角色、语言、学校、城市、信任分
- Post：指南/经验帖/诈骗案例等
  - 建议最小字段：
    - `type`：guide / experience / scam
    - `section`：板块（落地第一周 / 找房与入住 / 食物与超市 / 交通出行 / 办事与生活 / 安全与诈骗）
    - `city`（可选 `state`、`school`）
    - `title`、`content`
    - `status`：draft / pending / approved / rejected
- Verification：审核记录（状态、证据、审核人、更新时间）
- Helpfulness：有用度反馈
- Report：举报与处理结果
- VolunteerTicket：志愿者工单与分配
- AiAnswerLog：AI 回答日志（来源引用、模型版本、是否触发高风险提示）
- ModerationResult：AI 初筛结果（仅内部可见）

## 关键非功能需求（必须提前设计）

- 安全：频控、防刷、外链策略、敏感信息脱敏、审计日志
- 隐私：最小化采集、匿名展示、可删除请求（数据保留策略）
- 可观测性：错误监控、慢查询、队列积压、风控命中率
- 可运营：内容过期、更新激励、举报闭环、审核 SLA


